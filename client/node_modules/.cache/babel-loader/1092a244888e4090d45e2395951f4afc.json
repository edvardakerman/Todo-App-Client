{"ast":null,"code":"var _jsxFileName = \"/Users/edvardakerman/Code/backend3/Todo-App-Client/client/src/components/Form.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { formValidateMessage } from \"../utils/formValidateMessage\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Form({\n  type,\n  title\n}) {\n  _s();\n\n  const [formFields, setFormFields] = useState(null);\n  const [submitStatus, setSubmitStatus] = useState(null);\n  const {\n    setUser\n  } = useContext(UserContext);\n  const history = useHistory();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const validateMessage = formValidateMessage(formFields, type);\n\n    if (validateMessage === \"validates\") {\n      const url = `https://t0doappli.herokuapp.com/api/users/${type}`;\n\n      try {\n        const {\n          data\n        } = await axios.post(url, formFields);\n        localStorage.setItem(\"tkn\", data.token);\n        setUser(data.data.user);\n        history.push(\"/\");\n      } catch (e) {\n        if (e.response.data.errorCode === 11000) {\n          setSubmitStatus({\n            requestCompleted: false,\n            message: \"This email is already registered.\"\n          });\n        } else {\n          setSubmitStatus({\n            requestCompleted: false,\n            message: \"Something went wrong\"\n          });\n        }\n      }\n    } else {\n      setSubmitStatus({\n        requestCompleted: false,\n        message: validateMessage\n      });\n    }\n  };\n\n  const handleChange = (value, fieldId) => {\n    const payload = { ...formFields\n    };\n    payload[fieldId] = value;\n    setFormFields(payload);\n  };\n\n  if (type === \"signup\") {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          style: {\n            width: \"30rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body rounded bg-color\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"\",\n              action: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header text-white p-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-text my-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white mt-3 rounded\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    minLength: \"2\",\n                    placeholder: \"John Doe\",\n                    required: \"required\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"fullName\",\n                    type: \"text\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 65,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white mt-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    placeholder: \"JohnDoe@mail.com\",\n                    required: \"required\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"email\",\n                    type: \"email\",\n                    autoComplete: \"email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 78,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white mt-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    placeholder: \"********\",\n                    required: \"required\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"password\",\n                    type: \"password\",\n                    autoComplete: \"new-password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white mt-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Confirm Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    placeholder: \"********\",\n                    required: \"required\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"passwordConfirm\",\n                    type: \"password\",\n                    autoComplete: \"new-password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-dark rounded my-2 mx-4\",\n                  children: \"Register\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/login\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary rounded my-2 mx-4\",\n                    children: \"Login\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 17\n              }, this), submitStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: submitStatus.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  } else if (type === \"login\") {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card text-center\",\n          style: {\n            width: \"30rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body rounded bg-color\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              action: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header text-white p-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-text my-5 text-dark\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white my-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: \"required\",\n                    placeholder: \"johndoe@mail.com\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"email\",\n                    type: \"email\",\n                    autoComplete: \"email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white my-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: \"required\",\n                    placeholder: \"********\",\n                    onChange: e => handleChange(e.target.value, e.target.id),\n                    id: \"password\",\n                    type: \"password\",\n                    autoComplete: \"password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary rounded my-2 mx-4\",\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/register\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-dark rounded my-2 mx-4\",\n                    children: \"Register\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), submitStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-white\",\n                children: submitStatus.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Form, \"twjzLDvdN0vp4z3Jp5TdoObygGQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/edvardakerman/Code/backend3/Todo-App-Client/client/src/components/Form.jsx"],"names":["React","useState","useContext","Link","useHistory","axios","formValidateMessage","UserContext","Form","type","title","formFields","setFormFields","submitStatus","setSubmitStatus","setUser","history","handleSubmit","e","preventDefault","validateMessage","url","data","post","localStorage","setItem","token","user","push","response","errorCode","requestCompleted","message","handleChange","value","fieldId","payload","width","target","id"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { formValidateMessage } from \"../utils/formValidateMessage\";\nimport { UserContext } from \"../contexts/UserContext\";\n\nexport default function Form({ type, title }) {\n  const [formFields, setFormFields] = useState(null);\n  const [submitStatus, setSubmitStatus] = useState(null);\n  const { setUser } = useContext(UserContext);\n  const history = useHistory();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const validateMessage = formValidateMessage(formFields, type);\n\n    if (validateMessage === \"validates\") {\n      const url = `https://t0doappli.herokuapp.com/api/users/${type}`;\n      try {\n        const { data } = await axios.post(url, formFields);\n        localStorage.setItem(\"tkn\", data.token);\n        setUser(data.data.user);\n        history.push(\"/\");\n      } catch (e) {\n        if (e.response.data.errorCode === 11000) {\n          setSubmitStatus({\n            requestCompleted: false,\n            message: \"This email is already registered.\",\n          });\n        } else {\n          setSubmitStatus({\n            requestCompleted: false,\n            message: \"Something went wrong\",\n          });\n        }\n      }\n    } else {\n      setSubmitStatus({\n        requestCompleted: false,\n        message: validateMessage,\n      });\n    }\n  };\n\n  const handleChange = (value, fieldId) => {\n    const payload = { ...formFields };\n    payload[fieldId] = value;\n    setFormFields(payload);\n  };\n\n  if (type === \"signup\") {\n    return (\n      <section>\n        <div className=\"d-flex justify-content-center my-5\">\n          <div className=\"card text-center\" style={{ width: \"30rem\" }}>\n            <div className=\"card-body rounded bg-color\">\n              <form onSubmit={handleSubmit} className=\"\" action=\"\">\n                <div className=\"card-header text-white p-3\">\n                  <h1>{title}</h1>\n                </div>\n                <div className=\"card-text my-5\">\n                  <div className=\"text-white mt-3 rounded\">\n                    <h5>Name</h5>\n                    <input\n                      minLength=\"2\"\n                      placeholder=\"John Doe\"\n                      required=\"required\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"fullName\"\n                      type=\"text\"\n                    />\n                  </div>\n                  <div className=\"text-white mt-4\">\n                    <h5>Email</h5>\n                    <input\n                      placeholder=\"JohnDoe@mail.com\"\n                      required=\"required\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"email\"\n                      type=\"email\"\n                      autoComplete=\"email\"\n                    />\n                  </div>\n                  <div className=\"text-white mt-4\">\n                    <h6>Password</h6>\n                    <input\n                      placeholder=\"********\"\n                      required=\"required\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"password\"\n                      type=\"password\"\n                      autoComplete=\"new-password\"\n                    />\n                  </div>\n                  <div className=\"text-white mt-4\">\n                    <h6>Confirm Password</h6>\n                    <input\n                      placeholder=\"********\"\n                      required=\"required\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"passwordConfirm\"\n                      type=\"password\"\n                      autoComplete=\"new-password\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mb-2\">\n                  <button className=\"btn btn-dark rounded my-2 mx-4\">\n                    Register\n                  </button>\n                  <Link to=\"/login\">\n                    <button className=\"btn btn-primary rounded my-2 mx-4\">\n                      Login\n                    </button>\n                  </Link>\n                </div>\n                {submitStatus && <p>{submitStatus.message}</p>}\n              </form>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  } else if (type === \"login\") {\n    return (\n      <section>\n        <div className=\"d-flex justify-content-center my-5\">\n          <div className=\"card text-center\" style={{ width: \"30rem\" }}>\n            <div className=\"card-body rounded bg-color\">\n              <form onSubmit={handleSubmit} action=\"\">\n                <div className=\"card-header text-white p-3\">\n                  <h1>{title}</h1>\n                </div>\n                <div className=\"card-text my-5 text-dark\">\n                  <div className=\"text-white my-5\">\n                    <h5>Email</h5>\n                    <input\n                      required=\"required\"\n                      placeholder=\"johndoe@mail.com\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"email\"\n                      type=\"email\"\n                      autoComplete=\"email\"\n                    />\n                  </div>\n                  <div className=\"text-white my-5\">\n                    <h5>Password</h5>\n                    <input\n                      required=\"required\"\n                      placeholder=\"********\"\n                      onChange={(e) =>\n                        handleChange(e.target.value, e.target.id)\n                      }\n                      id=\"password\"\n                      type=\"password\"\n                      autoComplete=\"password\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"my-2\">\n                  <button className=\"btn btn-primary rounded my-2 mx-4\">\n                    Login\n                  </button>\n                  <Link to=\"/register\">\n                    <button className=\"btn btn-dark rounded my-2 mx-4\">\n                      Register\n                    </button>\n                  </Link>\n                </div>\n                {submitStatus && (\n                  <p className=\"text-white\">{submitStatus.message}</p>\n                )}\n              </form>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}