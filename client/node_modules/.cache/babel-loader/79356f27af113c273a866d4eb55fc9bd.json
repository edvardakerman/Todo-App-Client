{"ast":null,"code":"var _jsxFileName = \"/Users/edvardakerman/Code/backend3/Todo-App-Client/client/src/pages/TodoListPage.jsx\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect, useContext } from \"react\";\nimport { FiDelete } from \"react-icons/fi\";\nimport { AiTwotoneEdit } from \"react-icons/ai\";\nimport { IoCheckmarkSharp } from \"react-icons/io5\";\nimport { MdLibraryAdd } from \"react-icons/md\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TodoListPage() {\n  _s();\n\n  const [todos, setTodos] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState();\n  const {\n    user\n  } = useContext(UserContext);\n  useEffect(() => {\n    const fetchTodos = async () => {\n      const url = \"https://t0doappli.herokuapp.com/api/todos\";\n      const token = localStorage.getItem(\"tkn\");\n      const obj = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`\n        }\n      };\n      const response = await fetch(url, obj);\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const responseData = await response.json();\n      setTodos(responseData.data.todos.reverse());\n      setIsLoading(false);\n    };\n\n    fetchTodos().catch(error => {\n      setIsLoading(false);\n      setErrorMessage(error.message);\n    });\n  }, []);\n\n  const handleDelete = itemId => async event => {\n    const url = `https://t0doappli.herokuapp.com/api/todos/${itemId}`;\n    const token = localStorage.getItem(\"tkn\");\n    const obj = {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`\n      }\n    };\n    const response = await fetch(url, obj);\n\n    if (!response.ok) {\n      throw new Error(\"Something went wrong!\");\n    }\n\n    setTodos(pp => pp.filter(p => p._id !== itemId));\n  };\n\n  const capitalize = string => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (errorMessage || !user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center border-1 mt-5 border-bottom\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Welcome, this is your todo app\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center my-2\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please login or register to continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary mx-4\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark mx-4\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center border-1 mt-5 border-bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Welcome, this is your Todo list\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row row-cols-1 row-cols-md-3 mx-2 my-4\",\n        children: todos.map(todo => {\n          const date = new Date(todo.datePlaced);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card text-center h-100\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body bg-color rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"nounderline text-decoration-none\",\n                  href: `/todo/${todo._id}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-header p-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                      className: \"card-title text-white\",\n                      children: capitalize(todo.title)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 114,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                      className: \"card-subtitle mt-1 text-white\",\n                      children: date.toDateString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn m-3\",\n                    onClick: handleDelete(todo._id),\n                    children: /*#__PURE__*/_jsxDEV(IoCheckmarkSharp, {\n                      color: \"white\",\n                      size: 25\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `/edit/${todo._id}`,\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn m-3\",\n                      children: /*#__PURE__*/_jsxDEV(AiTwotoneEdit, {\n                        color: \"white\",\n                        size: 25\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn m-3\",\n                    onClick: handleDelete(todo._id),\n                    children: /*#__PURE__*/_jsxDEV(FiDelete, {\n                      color: \"white\",\n                      size: 25\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this)\n          }, todo._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"\",\n          href: \"/create\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn mx-5 my-3 btn-success text-center\",\n            children: [/*#__PURE__*/_jsxDEV(MdLibraryAdd, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), \" New Todo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\\"Something went wrong! Create\\\"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TodoListPage, \"XLpoQxEFuRVVgo1i6qcz6gtNb+U=\");\n\n_c = TodoListPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"TodoListPage\");","map":{"version":3,"sources":["/Users/edvardakerman/Code/backend3/Todo-App-Client/client/src/pages/TodoListPage.jsx"],"names":["React","useState","useEffect","useContext","FiDelete","AiTwotoneEdit","IoCheckmarkSharp","MdLibraryAdd","UserContext","TodoListPage","todos","setTodos","isLoading","setIsLoading","errorMessage","setErrorMessage","user","fetchTodos","url","token","localStorage","getItem","obj","headers","authorization","response","fetch","ok","Error","responseData","json","data","reverse","catch","error","message","handleDelete","itemId","event","method","pp","filter","p","_id","capitalize","string","charAt","toUpperCase","slice","map","todo","date","Date","datePlaced","title","toDateString"],"mappings":"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","sourcesContent":["import { React, useState, useEffect, useContext } from \"react\";\nimport { FiDelete } from \"react-icons/fi\";\nimport { AiTwotoneEdit } from \"react-icons/ai\";\nimport { IoCheckmarkSharp } from \"react-icons/io5\";\nimport { MdLibraryAdd } from \"react-icons/md\";\nimport { UserContext } from \"../contexts/UserContext\";\nexport default function TodoListPage() {\n  const [todos, setTodos] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState();\n  const { user } = useContext(UserContext);\n\n  useEffect(() => {\n    const fetchTodos = async () => {\n      const url = \"https://t0doappli.herokuapp.com/api/todos\";\n      const token = localStorage.getItem(\"tkn\");\n\n      const obj = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`,\n        },\n      };\n\n      const response = await fetch(url, obj);\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const responseData = await response.json();\n\n      setTodos(responseData.data.todos.reverse());\n      setIsLoading(false);\n    };\n    fetchTodos().catch((error) => {\n      setIsLoading(false);\n      setErrorMessage(error.message);\n    });\n  }, []);\n\n  const handleDelete = (itemId) => async (event) => {\n    const url = `https://t0doappli.herokuapp.com/api/todos/${itemId}`;\n    const token = localStorage.getItem(\"tkn\");\n    const obj = {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`,\n      },\n    };\n    const response = await fetch(url, obj);\n\n    if (!response.ok) {\n      throw new Error(\"Something went wrong!\");\n    }\n\n    setTodos((pp) => pp.filter((p) => p._id !== itemId));\n  };\n\n  const capitalize = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  if (isLoading) {\n    return (\n      <section>\n        <p>Loading...</p>\n      </section>\n    );\n  }\n\n  if (errorMessage || !user) {\n    return (\n      <div>\n        <div className=\"d-flex justify-content-center border-1 mt-5 border-bottom\">\n          <h2>Welcome, this is your todo app</h2>\n        </div>\n        <div className=\"d-flex justify-content-center my-2\">\n          <p>Please login or register to continue</p>\n        </div>\n        <div className=\"d-flex justify-content-center\">\n          <a href=\"/login\">\n            <button className=\"btn btn-primary mx-4\">Login</button>\n          </a>\n          <a href=\"/register\">\n            <button className=\"btn btn-dark mx-4\">Register</button>\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  if (user) {\n    return (\n      <div>\n        <div className=\"\">\n          <div className=\"d-flex justify-content-center border-1 mt-5 border-bottom\">\n            <h2>Welcome, this is your Todo list</h2>\n          </div>\n        </div>\n        <div className=\"row row-cols-1 row-cols-md-3 mx-2 my-4\">\n          {todos.map((todo) => {\n            const date = new Date(todo.datePlaced);\n            return (\n              <div key={todo._id} className=\"col mb-4\">\n                <div className=\"card text-center h-100\">\n                  <div className=\"card-body bg-color rounded\">\n                    <a\n                      className=\"nounderline text-decoration-none\"\n                      href={`/todo/${todo._id}`}\n                    >\n                      <div className=\"card-header p-3\">\n                        <h2 className=\"card-title text-white\">\n                          {capitalize(todo.title)}\n                        </h2>\n                        <h6 className=\"card-subtitle mt-1 text-white\">\n                          {date.toDateString()}\n                        </h6>\n                      </div>\n                    </a>\n\n                    <div>\n                      <button\n                        className=\"btn m-3\"\n                        onClick={handleDelete(todo._id)}\n                      >\n                        <IoCheckmarkSharp color={\"white\"} size={25} />\n                      </button>\n                      <a href={`/edit/${todo._id}`}>\n                        <button className=\"btn m-3\">\n                          <AiTwotoneEdit color={\"white\"} size={25} />\n                        </button>\n                      </a>\n                      <button\n                        className=\"btn m-3\"\n                        onClick={handleDelete(todo._id)}\n                      >\n                        <FiDelete color={\"white\"} size={25} />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <div className=\"d-flex justify-content-center my-5\">\n          <a className=\"\" href=\"/create\">\n            <button className=\"btn mx-5 my-3 btn-success text-center\">\n              <MdLibraryAdd size={20} /> New Todo\n            </button>\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <section>\n      <p>\"Something went wrong! Create\"</p>\n    </section>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}